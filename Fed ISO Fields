# Updated ISO 20022 Message Types and Data Fields for Funds Control in Wire Processing

## 1. Core ISO 20022 Message Types for Funds Control

### 1.1 Primary Payment Messages
- **pacs.008.001.10** - FIToFICustomerCreditTransfer - Customer Credit Transfer with enhanced funds control validation
- **pacs.002.001.12** - FIToFIPaymentStatusReport - Payment Status Report for funds availability and account status confirmation
- **pacs.004.001.10** - PaymentReturn - Payment Return message for insufficient funds or account restrictions
- **pacs.028.001.05** - FIToFIPaymentStatusRequest - Status inquiry for funds control verification

### 1.2 Account Management and Status Messages  
- **acmt.023.001.03** - IdentificationModificationAdvice - Account identification and status verification
- **acmt.024.001.03** - IdentificationVerificationReport - Account verification response for funds control
- **acmt.001.001.07** - AccountOpeningInstruction - New account setup with funds control parameters
- **acmt.002.001.07** - AccountDetailsConfirmation - Account details confirmation including funds control settings

### 1.3 Cash Management and Balance Messages
- **camt.052.001.09** - BankToCustomerAccountReport - Real-time intraday account balance and status
- **camt.053.001.09** - BankToCustomerStatement - End-of-day account statement with comprehensive balance information
- **camt.054.001.09** - BankToCustomerDebitCreditNotification - Real-time balance update notifications
- **camt.050.001.05** - LiquidityCreditTransfer - Liquidity management for funds optimization
- **camt.025.001.06** - Receipt - Balance inquiry receipt and confirmation

### 1.4 Funds Control Specific Messages
- **camt.086.001.05** - BankToCustomerDirectDebitInitiation - Pre-authorization and fund reservation
- **camt.087.001.05** - RequestToModifyPayment - Funds control modification requests
- **camt.029.001.10** - ResolutionOfInvestigation - Exception handling and resolution workflow
- **camt.035.001.06** - ProprietaryFormatInvestigation - Custom funds control inquiry messages

### 1.5 Limit and Restriction Management
- **camt.070.001.06** - AccountReportingRequest - Account limit and restriction inquiry
- **camt.071.001.06** - DeleteLimit - Limit removal for funds control optimization
- **camt.069.001.05** - GetLimit - Current limit inquiry for funds availability calculation
- **camt.068.001.05** - SetLimit - Limit establishment for funds control enforcement

## 2. Enhanced Key Data Fields for Funds Control

### 2.1 Core Transaction Fields
```xml
<CdtTrfTxInf>
    <PmtId>
        <EndToEndId>[Unique transaction identifier]</EndToEndId>
        <TxId>[Transaction ID for funds control tracking]</TxId>
        <UETR>[Unique End-to-End Transaction Reference]</UETR>
    </PmtId>
    <IntrBkSttlmAmt Ccy="USD">[Settlement amount for funds verification]</IntrBkSttlmAmt>
    <InstdAmt Ccy="USD">[Instructed amount for balance checking]</InstdAmt>
    <ChrgBr>[Charge bearer for total funds calculation]</ChrgBr>
    <ReqdExctnDt>[Required execution date for funds reservation]</ReqdExctnDt>
    <ReqdColltnDt>[Required collection date for availability]</ReqdColltnDt>
</CdtTrfTxInf>
```

### 2.2 Enhanced Debtor Account Information
```xml
<Dbtr>
    <Nm>[Debtor name for account verification]</Nm>
    <PstlAdr>
        <StrtNm>[Street name - structured addressing]</StrtNm>
        <BldgNb>[Building number]</BldgNb>
        <PstCd>[Postal code - mandatory for Fedwire]</PstCd>
        <TwnNm>[Town name - mandatory for Fedwire]</TwnNm>
        <Ctry>[Country code - mandatory]</Ctry>
    </PstlAdr>
    <Id>
        <OrgId>[Organization ID for corporate accounts]</OrgId>
        <PrvtId>[Private ID for individual accounts]</PrvtId>
    </Id>
</Dbtr>
<DbtrAcct>
    <Id>
        <IBAN>[International Bank Account Number]</IBAN>
        <Othr>
            <Id>[Account number for funds control]</Id>
            <SchmeNm>
                <Cd>BBAN</Cd>
            </SchmeNm>
        </Othr>
    </Id>
    <Nm>[Account name for verification]</Nm>
    <Ccy>[Account currency for balance calculation]</Ccy>
    <Tp>
        <Cd>[Account type for funds control rules]</Cd>
    </Tp>
</DbtrAcct>
```

### 2.3 Funds Control Status Fields
```xml
<StsInf>
    <OrgnlInstrId>[Original instruction ID]</OrgnlInstrId>
    <OrgnlEndToEndId>[Original end-to-end ID]</OrgnlEndToEndId>
    <TxSts>[Transaction status for funds control]</TxSts>
    <StsRsnInf>
        <Orgtr>
            <Id>
                <OrgId>
                    <BICOrBEI>[Originator BIC]</BICOrBEI>
                </OrgId>
            </Id>
        </Orgtr>
        <Rsn>
            <Cd>[Reason code for funds control decision]</Cd>
            <Prtry>[Proprietary reason for custom funds control]</Prtry>
        </Rsn>
        <AddtlInf>[Additional information for funds control status]</AddtlInf>
    </StsRsnInf>
</StsInf>
```

### 2.4 Balance and Account Status Fields
```xml
<Bal>
    <Tp>
        <CdOrPrtry>
            <Cd>CLBD</Cd> <!-- Closing booked balance -->
        </CdOrPrtry>
    </Tp>
    <Amt Ccy="USD">[Available balance amount]</Amt>
    <CdtDbtInd>[Credit or debit indicator]</CdtDbtInd>
    <Dt>
        <Dt>[Balance date]</Dt>
    </Dt>
</Bal>
<AcctSts>
    <Cd>[Account status code]</Cd>
    <Prtry>[Proprietary status for funds control]</Prtry>
</AcctSts>
<AcctSvcr>
    <FinInstnId>
        <BICFI>[Account servicer BIC]</BICFI>
        <Nm>[Institution name]</Nm>
    </FinInstnId>
</AcctSvcr>
```

### 2.5 Hold and Restriction Information
```xml
<Rsn>
    <Cd>HOLD</Cd> <!-- Standard hold reason code -->
    <Prtry>[Proprietary hold type]</Prtry>
</Rsn>
<AddtlInf>[Hold details and restrictions]</AddtlInf>
<HldInd>true</HldInd> <!-- Hold indicator -->
<HldTp>
    <Cd>[Hold type code]</Cd>
    <Prtry>[Proprietary hold classification]</Prtry>
</HldTp>
<HldAmt Ccy="USD">[Amount under hold]</HldAmt>
<HldDt>
    <FrDt>[Hold from date]</FrDt>
    <ToDt>[Hold to date]</ToDt>
</HldDt>
```

### 2.6 Credit Facility and Overdraft Fields
```xml
<CdtLmt>
    <Amt Ccy="USD">[Credit limit amount]</Amt>
    <CdtLmtTp>
        <Cd>CRED</Cd> <!-- Credit limit type -->
    </CdtLmtTp>
    <StartDt>[Credit facility start date]</StartDt>
    <EndDt>[Credit facility end date]</EndDt>
</CdtLmt>
<AvlblCdtAmt Ccy="USD">[Available credit amount]</AvlblCdtAmt>
<UsdCdtAmt Ccy="USD">[Used credit amount]</UsdCdtAmt>
<IntrstRate>[Interest rate for credit usage]</IntrstRate>
```

### 2.7 Multi-Currency and Exchange Rate Fields
```xml
<CcyXchg>
    <SrcCcy>[Source currency]</SrcCcy>
    <TrgtCcy>[Target currency]</TrgtCcy>
    <XchgRate>[Exchange rate for funds calculation]</XchgRate>
    <RateTp>
        <Cd>SPOT</Cd> <!-- Rate type -->
    </RateTp>
    <CtrctId>[Exchange contract ID]</CtrctId>
    <QtnDt>[Quote date and time]</QtnDt>
</CcyXchg>
<OrgnlAmt Ccy="EUR">[Original currency amount]</OrgnlAmt>
<XchgdAmt Ccy="USD">[Exchanged currency amount]</XchgdAmt>
```

### 2.8 Risk and Compliance Fields
```xml
<RskInf>
    <RskTp>
        <Cd>LQDT</Cd> <!-- Liquidity risk -->
    </RskTp>
    <RskLvl>[Risk level assessment]</RskLvl>
    <RskMtgtn>[Risk mitigation measures]</RskMtgtn>
</RskInf>
<CmpplncInf>
    <CmpplncTp>
        <Cd>AML</Cd> <!-- Anti-money laundering -->
    </CmpplncTp>
    <CmpplncSts>[Compliance status]</CmpplncSts>
    <CmpplncChck>[Compliance check results]</CmpplncChck>
</CmpplncInf>
```

## 3. Fedwire-Specific Enhancements (Current Standards)

### 3.1 Mandatory Structured Addressing
```xml
<UltmtDbtr>
    <Nm>[Ultimate debtor name]</Nm>
    <PstlAdr>
        <AdrTp>
            <Cd>BIZZ</Cd> <!-- Business address -->
        </AdrTp>
        <StrtNm>[Street name - mandatory structured]</StrtNm>
        <BldgNb>[Building number]</BldgNb>
        <PstCd>[Postal code - mandatory]</PstCd>
        <TwnNm>[Town name - mandatory]</TwnNm>
        <CtrySubDvsn>[State/province code]</CtrySubDvsn>
        <Ctry>US</Ctry> <!-- Country code - mandatory -->
    </PstlAdr>
</UltmtDbtr>
```

### 3.2 Enhanced Fedwire Fields for Funds Control
```xml
<FedwireRef>[Fedwire reference number]</FedwireRef>
<FedwireTm>[Fedwire processing time]</FedwireTm>
<SttlmAcct>
    <Id>
        <Othr>
            <Id>[Federal Reserve routing number]</Id>
            <SchmeNm>
                <Cd>USABA</Cd>
            </SchmeNm>
        </Othr>
    </Id>
</SttlmAcct>
<InstgAgt>
    <FinInstnId>
        <BICFI>[Instructing agent BIC]</BICFI>
        <ClrSysMmbId>
            <ClrSysId>
                <Cd>USABA</Cd>
            </ClrSysId>
            <MmbId>[ABA routing number]</MmbId>
        </ClrSysMmbId>
    </FinInstnId>
</InstgAgt>
```

## 4. CHIPS-Specific Message Enhancements

### 4.1 CHIPS Universal Identifier
```xml
<CHIPS>
    <ChipsUID>[CHIPS Universal Identifier]</ChipsUID>
    <ChipsSsn>[CHIPS session number]</ChipsSsn>
    <ChipsSeq>[CHIPS sequence number]</ChipsSeq>
</CHIPS>
```

### 4.2 CHIPS Settlement Fields
```xml
<ChipsSttlm>
    <SttlmMtd>
        <Cd>CLRG</Cd> <!-- Clearing method -->
    </SttlmMtd>
    <SttlmAcct>
        <Id>
            <Othr>
                <Id>[CHIPS participant identifier]</Id>
                <SchmeNm>
                    <Cd>CHIPS</Cd>
                </SchmeNm>
            </Othr>
        </Id>
    </SttlmAcct>
</ChipsSttlm>
```

## 5. Exception Handling and Status Codes

### 5.1 Funds Control Status Codes
- **ACCP** - AcceptedCustomerProfile - Funds available, account verified
- **RJCT** - Rejected - Insufficient funds or account restrictions
- **PDNG** - Pending - Funds verification in progress
- **PART** - PartiallyAccepted - Partial funds available
- **CANC** - Cancelled - Transaction cancelled due to funds control

### 5.2 Reason Codes for Funds Control
- **AM04** - InsufficientFunds - Account balance insufficient
- **AM05** - Duplication - Duplicate payment detected
- **AM09** - WrongAmount - Amount exceeds limits
- **AC01** - IncorrectAccountNumber - Account verification failed
- **AC04** - ClosedAccountNumber - Account closed or restricted
- **AC06** - BlockedAccount - Account blocked or frozen
- **AG01** - Transaction forbidden - Compliance restriction
- **AG02** - Invalid bank operation code - Operation not permitted

## 6. Implementation Guidelines

### 6.1 Message Flow for Funds Control
1. **Pre-validation**: camt.052 for balance inquiry
2. **Fund Reservation**: camt.086 for hold placement
3. **Payment Processing**: pacs.008 with funds control validation
4. **Status Reporting**: pacs.002 with funds availability confirmation
5. **Exception Handling**: camt.029 for resolution workflow

### 6.2 Real-Time Processing Requirements
- Balance verification within 200ms using camt.052
- Account status checking within 300ms using acmt.024
- Fund hold placement within 500ms using camt.086
- Status reporting within 100ms using pacs.002

### 6.3 Network Compliance Standards
- **Fedwire**: Full ISO 20022 compliance (current standard)
- **CHIPS**: Native ISO 20022 implementation (current standard)  
- **SWIFT**: MX format compliance required by November 2025
- **Legacy Support**: No MT or FAIM format support

This updated specification ensures comprehensive funds control capability while maintaining full compliance with current ISO 20022 standards across all major payment networks.
